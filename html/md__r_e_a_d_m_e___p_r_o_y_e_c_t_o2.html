<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Sistema de Control de Acceso con FreeRTOS y Display SSD1306</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__r_e_a_d_m_e___p_r_o_y_e_c_t_o2.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Sistema de Control de Acceso con FreeRTOS y Display SSD1306 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md1"></a>
Descripción del Proyecto</h1>
<p>Este proyecto implementa un sistema de control de acceso completo utilizando FreeRTOS como sistema operativo en tiempo real. El sistema migra la funcionalidad del Proyecto 1 a una arquitectura basada en tareas concurrentes y agrega un display SSD1306 I2C como interfaz de usuario.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md2"></a>
Características del Sistema</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md3"></a>
Hardware Requerido</h2>
<ul>
<li><b>Microcontrolador</b>: Raspberry Pi Pico</li>
<li><b>Teclado</b>: Matricial 4x4</li>
<li><b>LEDs</b>: 3 LEDs de señalización (Verde, Rojo, Amarillo)</li>
<li><b>Display</b>: SSD1306 OLED I2C 128x32 píxeles</li>
<li><b>Resistencias</b>: Limitadoras de corriente para LEDs</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md4"></a>
Conexiones de Hardware</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md5"></a>
Teclado Matricial 4x4</h3>
<ul>
<li><b>Filas</b>: GP6, GP7, GP8, GP9</li>
<li><b>Columnas</b>: GP10, GP11, GP12, GP13</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md6"></a>
LEDs de Señalización</h3>
<ul>
<li><b>LED Verde</b> (Acceso Concedido): GP15</li>
<li><b>LED Rojo</b> (Acceso Denegado): GP16</li>
<li><b>LED Amarillo</b> (Estado del Sistema): GP17</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md7"></a>
Display SSD1306 I2C</h3>
<ul>
<li><b>SDA</b>: GP4 (PICO_DEFAULT_I2C_SDA_PIN)</li>
<li><b>SCL</b>: GP5 (PICO_DEFAULT_I2C_SCL_PIN)</li>
<li><b>VCC</b>: 3.3V</li>
<li><b>GND</b>: GND</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md8"></a>
Arquitectura del Sistema</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md9"></a>
Tareas de FreeRTOS</h2>
<p>El sistema está dividido en 4 tareas principales que se ejecutan concurrentemente:</p>
<ol type="1">
<li><b>Tarea del Teclado</b> (<span class="tt">keypad_task</span>)<ul>
<li><b>Prioridad</b>: 4 (Alta)</li>
<li><b>Stack</b>: 512 bytes</li>
<li><b>Función</b>: Escanea continuamente el teclado matricial y envía eventos a través de colas</li>
</ul>
</li>
<li><b>Tarea de LEDs</b> (<span class="tt">led_task</span>)<ul>
<li><b>Prioridad</b>: 3 (Media)</li>
<li><b>Stack</b>: 256 bytes</li>
<li><b>Función</b>: Maneja todos los patrones de LEDs incluyendo parpadeo automático</li>
</ul>
</li>
<li><b>Tarea del Display</b> (<span class="tt">display_task</span>)<ul>
<li><b>Prioridad</b>: 3 (Media)</li>
<li><b>Stack</b>: 1024 bytes</li>
<li><b>Función</b>: Actualiza el display con mensajes del sistema y fecha/hora</li>
</ul>
</li>
<li><b>Tarea de Control de Acceso</b> (<span class="tt">access_control_task</span>)<ul>
<li><b>Prioridad</b>: 5 (Más Alta)</li>
<li><b>Stack</b>: 512 bytes</li>
<li><b>Función</b>: Implementa la máquina de estados principal del sistema</li>
</ul>
</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="autotoc_md10"></a>
Comunicación Entre Tareas</h2>
<p>Las tareas se comunican utilizando <b>colas de FreeRTOS</b>:</p><ul>
<li><b>Cola del Teclado</b>: Envía eventos de teclas presionadas</li>
<li><b>Cola de LEDs</b>: Recibe comandos para controlar los LEDs</li>
<li><b>Cola del Display</b>: Recibe comandos para actualizar la pantalla</li>
<li><b>Cola de Control de Acceso</b>: Maneja eventos del sistema como timeouts</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md11"></a>
Funcionalidad del Display SSD1306</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md12"></a>
Mensajes del Sistema</h2>
<p>El display muestra diferentes mensajes según el estado del sistema:</p>
<ol type="1">
<li><b>Estado de Espera</b>:<ul>
<li>Muestra "SISTEMA ACCESO" y fecha/hora actualizada cada segundo</li>
</ul>
</li>
<li><b>Ingreso de ID</b>:<ul>
<li>Muestra "INGRESE SU ID"</li>
</ul>
</li>
<li><b>Ingreso de Contraseña</b>:<ul>
<li>Muestra "INGRESE SU CONTRASENA"</li>
</ul>
</li>
<li><b>Acceso Concedido</b>:<ul>
<li>Muestra "BIENVENIDO" por 5 segundos</li>
</ul>
</li>
<li><b>Acceso Denegado</b>:<ul>
<li>Muestra "USUARIO O CONTRASENA INVALIDOS" por 3 segundos</li>
</ul>
</li>
<li><b>Cambio de Usuario</b>:<ul>
<li>Muestra mensajes específicos para el proceso de cambio de contraseña</li>
</ul>
</li>
</ol>
<h1 class="doxsection"><a class="anchor" id="autotoc_md13"></a>
Señalización LED</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md14"></a>
Patrones de LEDs</h2>
<ul>
<li><b>LED Amarillo Encendido</b>: Sistema en espera, listo para recibir entrada</li>
<li><b>LED Amarillo Apagado</b>: Usuario ingresando ID</li>
<li><b>LED Amarillo Parpadeando</b>: Usuario ingresando contraseña</li>
<li><b>LED Verde 5 segundos</b>: Acceso concedido</li>
<li><b>LED Rojo 2 segundos</b>: Acceso denegado</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md15"></a>
Base de Datos de Usuarios</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md16"></a>
Usuarios Predeterminados</h2>
<p>El sistema incluye 5 usuarios de prueba:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">ID  </th><th class="markdownTableHeadNone">Contraseña  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">123456  </td><td class="markdownTableBodyNone">1234  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">789012  </td><td class="markdownTableBodyNone">5678  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">345678  </td><td class="markdownTableBodyNone">9012  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">901234  </td><td class="markdownTableBodyNone">3456  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">567890  </td><td class="markdownTableBodyNone">7890  </td></tr>
</table>
<h2 class="doxsection"><a class="anchor" id="autotoc_md17"></a>
Funcionalidades de Seguridad</h2>
<ul>
<li><b>Bloqueo por Intentos Fallidos</b>: 3 intentos máximos antes de bloqueo</li>
<li><b>Timeout del Sistema</b>: 10 segundos para completar el proceso</li>
<li><b>Cambio de Contraseña</b>: Presionar '*' al inicio para activar modo de cambio</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md18"></a>
Compilación y Uso</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md19"></a>
Requisitos de Software</h2>
<ul>
<li><b>SDK</b>: Raspberry Pi Pico SDK 2.1.1</li>
<li><b>FreeRTOS</b>: Kernel incluido en el SDK</li>
<li><b>Toolchain</b>: ARM GCC 14_2_Rel1</li>
<li><b>Build System</b>: CMake + Ninja</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md20"></a>
Comandos de Compilación</h2>
<div class="fragment"><div class="line"># Compilar el proyecto</div>
<div class="line">ninja -C build</div>
<div class="line"> </div>
<div class="line"># O usar la tarea de VS Code</div>
<div class="line">Ctrl+Shift+P -&gt; &quot;Tasks: Run Task&quot; -&gt; &quot;Compile Project&quot;</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md21"></a>
Archivos Principales</h2>
<ul>
<li><b><span class="tt"><a class="el" href="main__rtos_8c.html" title="Aplicación principal del Sistema de Control de Acceso con FreeRTOS y Display SSD1306.">main_rtos.c</a></span></b>: Función principal y configuración de tareas</li>
<li><b><span class="tt">keypad_rtos.c</span></b>: Controlador del teclado para FreeRTOS</li>
<li><b><span class="tt">leds_rtos.c</span></b>: Controlador de LEDs para FreeRTOS</li>
<li><b><span class="tt">access_control_rtos.c</span></b>: Lógica de control de acceso para FreeRTOS</li>
<li><b><span class="tt"><a class="el" href="ssd1306__display_8c.html" title="Implementación del driver para display SSD1306 I2C.">ssd1306_display.c</a></span></b>: Driver del display SSD1306</li>
<li><b><span class="tt"><a class="el" href="_free_r_t_o_s_config_8h.html" title="Configuración de FreeRTOS para Sistema de Control de Acceso.">FreeRTOSConfig.h</a></span></b>: Configuración del sistema operativo</li>
<li><b><span class="tt">database.c</span></b>: Base de datos de usuarios (sin cambios)</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md22"></a>
Uso del Sistema</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md23"></a>
Proceso de Autenticación Normal</h2>
<ol type="1">
<li><b>Estado Inicial</b>: Display muestra fecha/hora, LED amarillo encendido</li>
<li><b>Ingreso de ID</b>: Presionar dígitos (0-9), luego '#' para confirmar</li>
<li><b>Ingreso de Contraseña</b>: Presionar dígitos (0-9), luego '#' para confirmar</li>
<li><b>Resultado</b>:<ul>
<li><b>Éxito</b>: LED verde 5 seg, display "BIENVENIDO"</li>
<li><b>Fallo</b>: LED rojo 2 seg, display "USUARIO O CONTRASENA INVALIDOS"</li>
</ul>
</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="autotoc_md24"></a>
Cambio de Contraseña</h2>
<ol type="1">
<li>Presionar '*' en estado inicial</li>
<li>El sistema entra en modo de cambio de contraseña</li>
<li>Seguir las instrucciones en el display</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="autotoc_md25"></a>
Cancelación</h2>
<ul>
<li>Presionar '*' en cualquier momento durante el proceso para cancelar y volver al estado inicial</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md26"></a>
Características Técnicas de FreeRTOS</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md27"></a>
Configuración del Kernel</h2>
<ul>
<li><b>Frecuencia del Tick</b>: 1000 Hz (1ms por tick)</li>
<li><b>Heap Size</b>: 128 KB</li>
<li><b>Algoritmo de Heap</b>: heap_4 (coalescencia automática)</li>
<li><b>Scheduler</b>: Preemptivo con time slicing</li>
<li><b>Prioridades</b>: 5 niveles (0-4)</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md28"></a>
Optimizaciones</h2>
<ul>
<li><b>Memoria</b>: Stacks optimizados por tarea</li>
<li><b>CPU</b>: Prioridades balanceadas para respuesta rápida</li>
<li><b>Energía</b>: Uso del hook idle para optimización futura</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md29"></a>
Manejo de Errores</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md30"></a>
Hooks de FreeRTOS</h2>
<p>El sistema incluye hooks para manejo de errores críticos:</p>
<ul>
<li><b><span class="tt"><a class="el" href="main__rtos_8c.html#ab7e5c95cf72a3f819bc4462a7fb62ca3" title="Hook llamado cuando se agota la memoria del heap.">vApplicationMallocFailedHook()</a></span></b>: Memoria agotada</li>
<li><b><span class="tt"><a class="el" href="main__rtos_8c.html#a306672a74bdd13ce210c05fca3385c59" title="Hook llamado cuando se detecta stack overflow en una tarea.">vApplicationStackOverflowHook()</a></span></b>: Desbordamiento de stack</li>
<li><b><span class="tt"><a class="el" href="main__rtos_8c.html#a97fd430f36f8b065226e2bff9bad1de5" title="Hook de la tarea idle de FreeRTOS.">vApplicationIdleHook()</a></span></b>: Tarea idle (optimización energética)</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md31"></a>
Señalización de Errores</h2>
<ul>
<li><b>LED Rojo Parpadeando Rápido</b>: Error de memoria</li>
<li><b>LED Amarillo Parpadeando Rápido</b>: Desbordamiento de stack</li>
<li><b>Mensajes por Puerto Serie</b>: Información detallada de errores</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md32"></a>
Futuras Mejoras</h1>
<ol type="1">
<li><b>Comunicación UART/SPI</b>: Para sistemas distribuidos</li>
<li><b>Almacenamiento Flash</b>: Persistencia de usuarios y configuración</li>
<li><b>Red WiFi</b>: Acceso remoto y logging</li>
<li><b>Sensores Adicionales</b>: Detección de presencia, temperatura</li>
<li><b>Interfaz Web</b>: Configuración y monitoreo remoto</li>
</ol>
<h1 class="doxsection"><a class="anchor" id="autotoc_md33"></a>
Autor</h1>
<p><b>Sistema de Control de Acceso</b> <br  />
 Desarrollado para el curso de Sistemas Embebidos <br  />
 Fecha: 2025</p>
<hr  />
<p><em>Este proyecto demuestra el uso efectivo de FreeRTOS para sistemas embebidos complejos, implementando comunicación entre tareas, manejo de recursos compartidos y interfaces de usuario avanzadas.</em> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
